# å®‰è£…å¿…è¦åŒ…
install.packages("meta")
install.packages("metafor")
library(meta)
# è¯»å–æ•°æ®
data <- read.csv("vitaminD_fracture_data.csv")
# è¯»å–æ•°æ®
set.wd(dir="/Users/cathy/Documents/å­¦ä¹ ç›¸å…³/å¤§ä¸‰ä¸‹/å¾ªè¯åŒ»å­¦")
# è¯»å–æ•°æ®
setwd (dir="/Users/cathy/Documents/å­¦ä¹ ç›¸å…³/å¤§ä¸‰ä¸‹/å¾ªè¯åŒ»å­¦")
data <- read.csv("vitaminD_fracture_data.csv")
#ä½¿ç”¨metabinè¿›è¡ŒäºŒåˆ†ç±»æ•°æ®Metaåˆ†æ
meta_result <- metabin(
event.e = event_treatment,  # å®éªŒç»„äº‹ä»¶æ•°
n.e = n_treatment,          # å®éªŒç»„æ€»æ ·æœ¬é‡
event.c = event_control,    # å¯¹ç…§ç»„äº‹ä»¶æ•°
n.c = n_control,            # å¯¹ç…§ç»„æ€»æ ·æœ¬é‡
data = data,
studlab = study,            # ç ”ç©¶æ ‡ç­¾
sm = "RR",                  # ä½¿ç”¨é£é™©æ¯”(RR)
method = "Inverse",         # å›ºå®šæ•ˆåº”æ¨¡å‹ï¼ˆå›ºå®šæ•ˆåº”å¯æ”¹ä¸º"MH"ï¼‰
random = TRUE,              # éšæœºæ•ˆåº”æ¨¡å‹
hakn = FALSE,               # æ˜¯å¦ä½¿ç”¨Hartung-Knappè°ƒæ•´
prediction = TRUE,          # æ˜¾ç¤ºé¢„æµ‹åŒºé—´
method.tau = "REML"         # å¼‚è´¨æ€§æ–¹å·®ä¼°è®¡æ–¹æ³•
)
library(meta)
library(metafor)
# å®‰è£…å¿…è¦åŒ…
install.packages("meta")
install.packages("metafor")
library(meta)
library(metafor)
# å®‰è£…å¿…è¦åŒ…
#install.packages("meta")
#install.packages("metafor")
library(meta)
library(metafor)
#ä½¿ç”¨metabinè¿›è¡ŒäºŒåˆ†ç±»æ•°æ®Metaåˆ†æ
meta_result <- metabin(
event.e = event_treatment,  # å®éªŒç»„äº‹ä»¶æ•°
n.e = n_treatment,          # å®éªŒç»„æ€»æ ·æœ¬é‡
event.c = event_control,    # å¯¹ç…§ç»„äº‹ä»¶æ•°
n.c = n_control,            # å¯¹ç…§ç»„æ€»æ ·æœ¬é‡
data = data,
studlab = study,            # ç ”ç©¶æ ‡ç­¾
sm = "RR",                  # ä½¿ç”¨é£é™©æ¯”(RR)
method = "Inverse",         # å›ºå®šæ•ˆåº”æ¨¡å‹ï¼ˆå›ºå®šæ•ˆåº”å¯æ”¹ä¸º"MH"ï¼‰
random = TRUE,              # éšæœºæ•ˆåº”æ¨¡å‹
hakn = FALSE,               # æ˜¯å¦ä½¿ç”¨Hartung-Knappè°ƒæ•´
prediction = TRUE,          # æ˜¾ç¤ºé¢„æµ‹åŒºé—´
method.tau = "REML"         # å¼‚è´¨æ€§æ–¹å·®ä¼°è®¡æ–¹æ³•
)
#ä½¿ç”¨metabinè¿›è¡ŒäºŒåˆ†ç±»æ•°æ®Metaåˆ†æ
meta_result <- metabin(
event.e = event_treatment,  # å®éªŒç»„äº‹ä»¶æ•°
n.e = n_treatment,          # å®éªŒç»„æ€»æ ·æœ¬é‡
event.c = event_control,    # å¯¹ç…§ç»„äº‹ä»¶æ•°
n.c = n_control,            # å¯¹ç…§ç»„æ€»æ ·æœ¬é‡
data = data,
studlab = study,            # ç ”ç©¶æ ‡ç­¾
sm = "RR",                  # ä½¿ç”¨é£é™©æ¯”(RR)
method = "Inverse",         # å›ºå®šæ•ˆåº”æ¨¡å‹ï¼ˆå›ºå®šæ•ˆåº”å¯æ”¹ä¸º"MH"ï¼‰
random = TRUE,              # éšæœºæ•ˆåº”æ¨¡å‹
hakn = FALSE,               # æ˜¯å¦ä½¿ç”¨Hartung-Knappè°ƒæ•´
prediction = TRUE,          # æ˜¾ç¤ºé¢„æµ‹åŒºé—´
method.tau = "REML"         # å¼‚è´¨æ€§æ–¹å·®ä¼°è®¡æ–¹æ³•
)
#ä½¿ç”¨metabinè¿›è¡ŒäºŒåˆ†ç±»æ•°æ®Metaåˆ†æ
meta_result <- metabin(
event.e = event_treatment,
n.e = n_treatment,
event.c = event_control,
n.c = n_control,
data = data,
studlab = study,
sm = "RR",
method = "Inverse",         # å›ºå®šæ•ˆåº”æ¨¡å‹ï¼ˆè‹¥éœ€Mantel-Haenszelæ³•å¯æ”¹ä¸º "MH"ï¼‰
random = TRUE,              # éšæœºæ•ˆåº”æ¨¡å‹
method.random.ci = "classic",  # æ›¿ä»£ hakn = FALSE
prediction = TRUE,          # æ˜¾ç¤ºé¢„æµ‹åŒºé—´
method.tau = "REML"         # å¼‚è´¨æ€§æ–¹å·®ä¼°è®¡æ–¹æ³•ï¼ˆå¯é€‰"DL"/"PM"ï¼‰
)
# æŸ¥çœ‹ç»“æœ
summary(meta_result)
# ç»˜åˆ¶æ£®æ—å›¾
forest(meta_result)
setwd("/Users/cathy/Documents/å­¦ä¹ ç›¸å…³/å¤§ä¸‰ä¸‹/å¾ªè¯åŒ»å­¦/å®ä¾‹_Rä»£ç ")
# csv file
data1<-read.csv("Data 1.csv")
# install.packages("readxl")
library("readxl")
# xls files
my_data0 <- read_excel("Data 1.xls")
as.data.frame(my_data0)
head(my_data0)
str(my_data0)
# ä¿®æ”¹æ•°æ®
my_data3<-edit(my_data0)
# xlsx files
my_data1 <- read_excel("Data 1.xlsx")
str(my_data1)
head(my_data1)
# install.packages("meta")
library(meta)
# è‡ªå·±é€‰æ‹©æ–‡ä»¶
my_data2 <- read_excel("Data 2.xlsx")
# è‡ªå·±é€‰æ‹©æ–‡ä»¶
my_data2 <- read.csv("Data 1.csv")
# ä¿®æ”¹æ•°æ®
my_data3<-edit(my_data0)
library(XQuartz)
install.packages("XQuartz")
install.packages("XQuartz")
# ä¿®æ”¹æ•°æ®
my_data3<-edit(my_data0)
met1<-metabin(
event.e=N_hip_E,
n.e=Total_E,
event.c=N_hip_C,
n.c=Total_C,
studlab=Source,
data =my_data0,
sm ="RR"
)
met1
summary(met1)
forest(met1)
data2 <- read.csv("Data 2.csv")
met2<-metacont( n.e=N_E,
mean.e=Mean_E,
sd.e=SD_E,
n.c=N_C,
mean.c=Mean_C,
sd.c=SD_C,
data=data2,
common=TRUE,random=TRUE,
studlab= Studies)
summary(met2)
forest(met2)
# HR with CI
data3<-read_excel(path ="example HR.xlsx",sheet =1)
met3<-metagen(TE= log(HR),
lower = log(lower.HR),
upper = log(upper.HR),
data=data3,
studlab = paste(Author, Year),
sm = "HR")
summary(met3)
forest(met3)
forest(met3,leftcols = c("studlab"),colgap.forest.left="30mm")
met3<-metagen(TE=HR,
lower = lower.HR,
upper = upper.HR,
data=data3,
transf = FALSE,
studlab = paste(Author, Year),
sm = "HR")
summary(met3)
forest(met3)
forest(met3,leftcols = c("studlab"),colgap.forest.left="30mm")
# MD with SE
data4<-read_excel(path ="example MD.xlsx",sheet =1)
met4<-metagen(TE=MD,
seTE=seMD,
data=data4,
studlab = Studies,
sm = "MD")
summary(met4)
forest(met4)
forest(met4,leftcols = c("studlab"),colgap.forest.left="30mm")
# äºšç»„åˆ†æã€metaå›å½’
data1<-read.csv("Data 1.csv")
met1<-metabin(event.e=N_hip_E,
n.e=Total_E,
event.c=N_hip_C,
n.c=Total_C,
data=data1,
sm="RR",
studlab= paste(Source, Year))
summary(met1)
# äºšç»„åˆ†æ
forest(update(met1,subgroup = Vitamin_D,subgroup.name = "Dose"))
devtools::install_github("gadenbuie/ermoji")
emo::ji_search("cat")
library(ermoji)
emo::ji_search("cat")
library(shiny)
library(shiny)
detach("package:shiny", unload = TRUE)
library(shiny)
emo::ji_find("cat")
library(shiny)
install.packages("shiny")
# è¾“å‡ºç¤ºä¾‹: "ğŸ±" "ğŸˆ" "ğŸ˜¸" "ğŸ˜¹" "ğŸ˜º" "ğŸ˜»" "ğŸ˜¼" "ğŸ˜½" "ğŸ˜¾" "ğŸ˜¿" "ğŸ™€" "ğŸ¾"
emo::ji("R is cool :sunglasses:")
library(shiny)
ui <- fluidPage(
titlePanel("æˆ‘çš„ç¬¬ä¸€ä¸ª Shiny åº”ç”¨"),
sidebarLayout(
sidebarPanel(
sliderInput("n", "é€‰æ‹©æ ·æœ¬æ•°é‡:", min=1, max=1000, value=500)
),
mainPanel(
plotOutput("histogram")
)
)
)
ui
#å¯åŠ¨åº”ç”¨
shinyApp(ui = ui, server = server)
#Server ç»„ä»¶:å¤„ç†æ•°æ®é€»è¾‘å¹¶ç”ŸæˆåŠ¨æ€è¾“å‡º
server <- function(input, output) {
output$histogram <- renderPlot({
data <- rnorm(input$n)
hist(data, main = "æ­£æ€åˆ†å¸ƒæ ·æœ¬ç›´æ–¹å›¾")
})
}
#å¯åŠ¨åº”ç”¨
shinyApp(ui = ui, server = server)
emo::ji("R is cool :sunglasses:")
emo::ji_find("cat")
library(shiny)
ui <- fluidPage(
h1("Welcome!", emo::ji("wave"))
)
# å°†åˆ«åè½¬æ¢ä¸º Emoji
emo::ji("Hello :earth_asia:!")  # Hello ğŸŒ!
# æ­£ç¡®ï¼šä»…ä¼ é€’åˆ«åéƒ¨åˆ†
emo::ji("earth_asia")  # è¾“å‡º ğŸŒ
paste0("Hello ", emo::ji("earth_asia"), "!")  # "Hello ğŸŒ!"
setwd("/Users/cathy/Documents/å­¦ä¹ ç›¸å…³/å¤§ä¸‰ä¸‹/å¾ªè¯åŒ»å­¦/å®ä¾‹_Rä»£ç ")
# csv file
data1<-read.csv("Data 1.csv")
# xlsx files
my_data1 <- read_excel("Data 1.xlsx")
# install.packages("readxl")
# install.packages("XQuartz")
library("readxl")
# xlsx files
my_data1 <- read_excel("Data 1.xlsx")
str(my_data1)
head(my_data1)
# install.packages("meta")
library(meta)
# install.packages("meta")
library(meta)
met1<-metabin(
event.e=N_hip_E,
n.e=Total_E,
event.c=N_hip_C,
n.c=Total_C,
studlab=Source,
data =my_data0,
sm ="RR"
)
# xls files
my_data0 <- read_excel("Data 1.xls")
met1<-metabin(
event.e=N_hip_E,
n.e=Total_E,
event.c=N_hip_C,
n.c=Total_C,
studlab=Source,
data =my_data0,
sm ="RR"
)
met1
met1
summary(met1)
forest(met1)
data <- read_xlsx("Exercise 1.xlsx")
data
metadd<-metabin(event.e=TB_E,
n.e=Total_E,
event.c=TB_C,
n.c=Total_C,
data=data,
sm="RR",
studlab= paste(Study, Year))
mrgadd<-metareg(metadd,~Latitude)
summary(mrgadd)
plot(mrgadd)
bubble(mrgadd)
forest(mrgadd,annotate=TRUE, addfit=TRUE, addcred=TRUE)
# å‘è¡¨åç§»
funnel(met1)
Begg<-metabias(met1,k.min=5,method.bias = "rank")
Egger<-metabias(met1,k.min=5,method.bias = "linreg")
tr<-trimfill(met1)
funnel(tr)
# æ•æ„Ÿåˆ†æ
metinf<-metainf(met1,pooled="random")
forest(metinf)
metcum<-metacum(met1, sortvar = Year)
forest(metcum)
# å¯¼å‡ºå›¾
tiff(file = "C:\\Users\\Administrator\\Desktop\\metadata\\R\\Forest1.tif",width = 3300,height = 1000,res = 300,compression ="lzw")
forest(met1,label.e="Vitamin D",label.c="Placebo")
dev.off()
# åˆå¹¶metaå›¾
met1a<-metabin(N_hip_E , Total_E , N_hip_C , Total_C,
data=data1,
common=TRUE,random=TRUE,
sm="RR", method="MH",
title="Hip Fracture",
allstudies=TRUE,
studlab= paste(Source, Year))
summary(met1a)
met1b<-metabin(N_all_E , Total_E , N_all_C , Total_C,
data=data1,
common=TRUE,random=TRUE,
sm="RR", method="MH",
title="Hip Fracture",
allstudies=TRUE,
studlab= paste(Source, Year))
summary(met1b)
forest(metabind(met1a,met1b,name=c("Hip Fracture","All Fracture")))
summary(mrgadd)
# å‘è¡¨åç§»
funnel(met1)
Begg<-metabias(met1,k.min=5,method.bias = "rank")
Egger<-metabias(met1,k.min=5,method.bias = "linreg")
tr<-trimfill(met1)
funnel(tr)
